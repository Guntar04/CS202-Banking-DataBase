<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bank</title>
</head>
<body>
    <nav>
        <ul>
            <li><strong>NexBank</strong></li>
            <li class="vertical-line"></li> <!-- Vertical Line Here -->
            <li><a href="/home">Home</a></li>
            <li><a href="/bank">Personal Bank</a></li>
            <li><a href="/profile">Profile</a></li>
            <li><a href="/contact">Contact Us</a></li>
            <li style="margin-left: auto;"><a href="/logout">Sign Out</a></li>
        </ul>
    </nav>
<div class="contentBody">
    <div class="topLine">
        <h1>Your Banking Information</h1>
        <div class="buttons">
            <button onclick="deposit()">Deposit</button>
            <button onclick="withdraw()">Withdraw</button>
        </div>
        
    </div>
    <hr>
    <div class="tableContainer">
        <div class="table">
            <table>
                <colgroup>
                    <col style="width: 33%;">
                    <col style="width: 33%;">
                    <col style="width: 33%;">
                </colgroup>
                <thead>
                    <tr>
                        <th><br>Type of Transaction</th>
                        <th><br>Date of Transaction</th>
                        <th><br>Amount</th>
                    </tr>
                </thead>
                <tbody>
                    {% for transaction in transactions %}
                    <tr>
                        <td> <hr>{{ transaction.transType }}</td>
                        <td> <hr>{{ transaction.transDate }}</td>
                        <td> <hr>{{ transaction.transAmount }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <h1>Account Balance: {{ totalMoney }}</h1>
</div>

<script>
    function deposit() {
        var amount = prompt("Enter the amount to deposit:");
        fetch('/bank', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                amount: amount,
                transaction_type: 'Deposit'
            })
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                location.reload();
            } else {
                alert('Error: ' + data.message);
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('Error: Unable to process the transaction.');
        });
    }

    function withdraw() {
        var amount = prompt("Enter the amount to withdraw:");
        fetch('/bank', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                amount: amount,
                transaction_type: 'Withdraw'
            })
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                location.reload();
            } else {
                alert('Error: ' + data.message);
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('Error: Unable to process the transaction.');
        });
    }
</script>

<style>
    nav {
        background-color: rgb(17, 108, 211);
        border-radius: 5px;
    }

    ul {
        display: flex;
        list-style-type: none;
        padding: 2% 0% 2% 3%;
        font-size: 200%;
        color: white;
        margin: 0%;
    }

    li {
        margin-right: 50px;
    }

    a {
        color: white;
        text-decoration: none;
    }

    nav ul li.vertical-line::after {
        content: "";
        display: inline-block;
        width: 8px;
        height: 100%;
        background-color: white; /* Adjust color as needed */
        margin: 0 10px 0 0;
        border-radius: 10%;
    }

    body {
        background-color: #0034a3;
        font-family: Arial, sans-serif;
        color: white;
    }

    .topLine {
        display: flex;
        flex-direction: row;
        flex-wrap: nowrap;
    }

    .topLine button {
        padding: 10px;
        border-radius: 5px;
        border: 1px solid #ffffff;
        background-color: #3296b4;
        font-size: 150%;
        color: white;
        border-radius: 50px;
        align-self: center;
        margin-left: 20px;
    }

    .buttons {
        display: flex;
        margin-left: auto;
        padding: 10;
    }

    .tableContainer {
        display: flex;
        justify-content: center;
        font-size: 200%;
        width: 70%;
        margin: auto;
        background-color: #ffffff;
    }

    .tableContainer tr {
        color: black;
    }

    hr {
        border: 1px solid black;
        width: 100%;
    }

    .contentBody {
        background-color: #202020c2;
        padding: 20px;
        border-radius: 5px;
        margin: 0 auto; 
        width: 66.67%;
        
    }

    .content p {
        font-size: 150%;
        padding: 20px 30px 20px 30px;
    }

    th{
        text-align: left;
    }
</style>
</body>
</html>